<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fichas</title>
    <link rel="stylesheet" href="estilos/mobile.css">
</head>
<body>

    <!--Menu dos dados-->
    <div>
        <img src="imagens/D20_icon.png" alt="Dado" id="btnDadoFora" onclick="abrirTelaDados()">
        <div id="telaDado">
            <img src="imagens/D20_icon.png" alt="Dado" id="btnDadoDentro" onclick="fecharTelaDados()">
        </div>
    </div>

    <!--Foto do personagem-->
    <div class="container-foto-perfil">
        <label for="addFoto" class="add-foto"><img id="foto"><input type="file" id="addFoto"></label>
    </div>

    <!--Nome do personagem-->
    <div class="container-nome-persona">
        <input type="text" id="nomeJog" oninput="atualizarTamanho(this)" placeholder="Personagem">
    </div>    

    <div class="container-menu-info">

        <abbr title="Abrir Menu de informações"><button id="btnMenuInfo" onclick="abrirmenuinfo()"></button></abbr>

        <div id="menuInfo">

            <div class="jogador"> 
                <label for="ijogador">Jogador:<input type="text" id="ijogador"></label>
            </div>

            <hr>

            <div class="container-fisico-personalidade">
                <div class="fisico">
                    <label for="ialtura">Altura:<input type="text" id="ialtura"></label> <br>

                    <label for="icabelo">Cabelo:<input type="text" id="icabelo"></label> <br>

                    <label for="iolhos">Olhos:<input type="text" id="iolhos"></label> <br>

                    <label for="ipele">Pele:<input type="text" id="ipele"></label> <br>

                    <label for="isexo">Sexo:<input type="text" id="isexo"></label> <br>
                </div>
                
                <div class="personalidade">
                    <label for="iidade">Idade:<input type="text" id="iidade"></label> <br>

                    <label for="iclasse">Classe:<input type="text" id="iclasse"></label> <br>

                    <label for="iprofissão">Profissão:<input type="text" id="iprofissão"></label> <br>

                </div>
            </div>

        </div>
    </div>

    <script src="scripts/menuDado.js"></script>
    <script src="scripts/fotoPerfil.js"></script>
    <script src="scripts/infos.js"></script>

    <script>
         // Função para salvar os dados no localStorage
    function salvarDados() {
        // Obtém os valores dos campos
        var jogador = document.getElementById("ijogador").value;
        var altura = document.getElementById("ialtura").value;
        var cabelo = document.getElementById("icabelo").value;
        var olhos = document.getElementById("iolhos").value;
        var pele = document.getElementById("ipele").value;
        var sexo = document.getElementById("isexo").value;
        var idade = document.getElementById("iidade").value;
        var classe = document.getElementById("iclasse").value;
        var profissao = document.getElementById("iprofissão").value;

        // Cria um objeto com os dados
        var dados = {
            jogador: jogador,
            altura: altura,
            cabelo: cabelo,
            olhos: olhos,
            pele: pele,
            sexo: sexo,
            idade: idade,
            classe: classe,
            profissao: profissao
        };

        // Converte o objeto em uma string JSON
        var dadosString = JSON.stringify(dados);

        // Salva a string JSON no localStorage
        localStorage.setItem("dados", dadosString);
    }

    // Função para carregar os dados do localStorage
    function carregarDados() {
        // Obtém a string JSON do localStorage
        var dadosString = localStorage.getItem("dados");

        // Verifica se há dados salvos
        if (dadosString) {
            // Converte a string JSON de volta para objeto
            var dados = JSON.parse(dadosString);

            // Preenche os campos com os dados salvos
            document.getElementById("ijogador").value = dados.jogador;
            document.getElementById("ialtura").value = dados.altura;
            document.getElementById("icabelo").value = dados.cabelo;
            document.getElementById("iolhos").value = dados.olhos;
            document.getElementById("ipele").value = dados.pele;
            document.getElementById("isexo").value = dados.sexo;
            document.getElementById("iidade").value = dados.idade;
            document.getElementById("iclasse").value = dados.classe;
            document.getElementById("iprofissão").value = dados.profissao;
        }
    }

    // Chama a função de carregar os dados ao carregar a página
    window.onload = carregarDados;
    
    // Chama a função de salvar os dados ao sair da página
    window.onbeforeunload = salvarDados;
    </script>
</body>
</html>